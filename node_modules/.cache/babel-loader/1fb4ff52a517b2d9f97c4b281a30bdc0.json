{"ast":null,"code":"var _jsxFileName = \"/Users/hbin/Desktop/react/reactActual/admin/src/Pages/AddArticle.js\";\nimport React, { useState, useEffect } from 'react';\nimport marked from 'marked';\nimport '../static/css/AddArticle.css';\nimport axios from 'axios';\nimport servicePath from '../config/apiUrl';\nimport { Row, Col, Input, Select, Button, DatePicker, message } from 'antd';\nimport Title from 'antd/lib/skeleton/Title';\nconst {\n  Option\n} = Select; //对象解析\n\nconst {\n  TextArea\n} = Input;\n\nfunction AddArticle() {\n  const [articleId, setArticleId] = useState(0); //文章ID\n\n  const [articleTitle, setArticleTitle] = useState(''); //文章标题\n\n  const [articleContent, setArticleContent] = useState(''); //markdown的编辑内容\n\n  const [markdownContent, setMarkdownContent] = useState('预览内容'); //html内容\n\n  const [introducemd, setIntroducemd] = useState(); //简介的markdown内容\n\n  const [introducehtml, setIntroducehtml] = useState('等待编辑'); //简介的html内容\n\n  const [showData, setShowData] = useState(); //发布日期\n\n  const [updateDate, setUpdateDate] = useState(); //修改日期\n\n  const [typeInfo, setTypeInfo] = useState([]); //文章类别信息\n\n  const [selectedType, setSelectedType] = useState('请选择类型'); //选择文章类型    \n  //[] 就是只执行一次\n\n  useEffect(() => {\n    getTypeInfo();\n  }, []);\n  const renderer = new marked.Renderer(); //markdown设置\n\n  marked.setOptions({\n    renderer: renderer,\n    gfm: true,\n    pedantic: false,\n    sanitize: false,\n    tables: true,\n    breaks: false,\n    smartLists: true,\n    smartypants: false\n  });\n\n  const changeContext = e => {\n    setArticleContent(e.target.value);\n    let html = marked(e.target.value);\n    setMarkdownContent(html);\n  };\n\n  const changeIntroduce = e => {\n    setIntroducemd(e.target.value);\n    let html = marked(e.target.value);\n    setIntroducehtml(html);\n  };\n\n  const getTypeInfo = () => {\n    axios({\n      method: 'get',\n      url: servicePath.type\n    }).then(res => {\n      setTypeInfo(res.data['date']);\n    });\n  };\n\n  const selectTypeHandler = value => {\n    setSelectedType(value);\n  };\n\n  const saveArticle = () => {\n    if (selectedType === '请选择类型') {\n      message.error(\"必须选择文章类型\");\n      return false;\n    } else if (!articleTitle) {\n      message.error(\"必须填写文章标题\");\n      return false;\n    } else if (!articleContent) {\n      message.error(\"必须填写文章内容\");\n      return false;\n    } else if (!introducemd) {\n      message.error(\"必须填写文章简介\");\n      return false;\n    } else if (!showData) {\n      message.error(\"必须填写发布时间\");\n      return false;\n    }\n\n    axios({\n      method: 'POST',\n      url: servicePath.addArticle + '?type_id=' + selectedType + '&title=' + articleTitle + '&article_content=' + articleContent + '&introduce=' + introducemd + '&addTime=' + showData\n    }).then(res => {\n      if (res.data['status'] == 200) {\n        message.success(res.data['msg']);\n        setSelectedType('请选择类型');\n        setArticleTitle('');\n        setArticleContent('');\n        setIntroducemd('');\n        setShowData('');\n      } else {\n        message.error(res.data['msg']);\n      }\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Row, {\n    gutter: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 24,\n    xl: 18,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(Row, {\n    gutter: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 18,\n    xl: 19,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Input, {\n    value: articleTitle,\n    placeholder: \"\\u535A\\u5BA2\\u6807\\u9898\",\n    size: \"large\",\n    onChange: e => {\n      setArticleTitle(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), React.createElement(Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 6,\n    xl: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"\\xA0\", React.createElement(Select, {\n    defaultValue: selectedType,\n    size: \"large\",\n    onChange: selectTypeHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, // console.log(typeInfo)\n  typeInfo.map((item, index) => {\n    return React.createElement(Option, {\n      key: index,\n      value: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, item.typeName);\n  })))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), React.createElement(Row, {\n    gutter: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    xl: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(TextArea, {\n    className: \"markdown-content\",\n    rows: 35,\n    placeholder: \"\\u6587\\u7AE0\\u5185\\u5BB9\",\n    value: articleContent,\n    onChange: changeContext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  })), React.createElement(Col, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    xl: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"show-html\",\n    dangerouslySetInnerHTML: {\n      __html: markdownContent\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  })))), React.createElement(Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 0,\n    xl: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 0,\n    xl: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(Button, {\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"\\u6682\\u5B58\\u6587\\u7AE0\"), \"\\xA0\", React.createElement(Button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: saveArticle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"\\u53D1\\u5E03\\u6587\\u7AE0\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  })), React.createElement(Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 0,\n    xl: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(TextArea, {\n    rows: 4,\n    placeholder: \"\\u6587\\u7AE0\\u7B80\\u4ECB\",\n    onChange: changeIntroduce,\n    value: introducemd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"introduce-html\",\n    dangerouslySetInnerHTML: {\n      __html: introducehtml\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  })), React.createElement(Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 0,\n    xl: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"data-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(DatePicker, {\n    onChange: (date, dateString) => {\n      setShowData(dateString);\n    },\n    placeholder: \"\\u53D1\\u5E03\\u65E5\\u671F\",\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  })))))));\n}\n\nexport default AddArticle;","map":{"version":3,"sources":["/Users/hbin/Desktop/react/reactActual/admin/src/Pages/AddArticle.js"],"names":["React","useState","useEffect","marked","axios","servicePath","Row","Col","Input","Select","Button","DatePicker","message","Title","Option","TextArea","AddArticle","articleId","setArticleId","articleTitle","setArticleTitle","articleContent","setArticleContent","markdownContent","setMarkdownContent","introducemd","setIntroducemd","introducehtml","setIntroducehtml","showData","setShowData","updateDate","setUpdateDate","typeInfo","setTypeInfo","selectedType","setSelectedType","getTypeInfo","renderer","Renderer","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","changeContext","e","target","value","html","changeIntroduce","method","url","type","then","res","data","selectTypeHandler","saveArticle","error","addArticle","success","map","item","index","id","typeName","__html","date","dateString"],"mappings":"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","sourcesContent":["import React, { useState , useEffect } from 'react';\nimport marked from 'marked'\nimport '../static/css/AddArticle.css'\nimport axios from 'axios'\nimport servicePath from '../config/apiUrl'\nimport { Row , Col , Input , Select , Button , DatePicker, message } from 'antd'\nimport Title from 'antd/lib/skeleton/Title';\nconst { Option } = Select //对象解析\nconst { TextArea } = Input\n\n\nfunction AddArticle(){\n\n    const [ articleId , setArticleId ] = useState(0)            //文章ID\n    const [ articleTitle , setArticleTitle] = useState('')      //文章标题\n    const [ articleContent , setArticleContent] = useState('')  //markdown的编辑内容\n    const [ markdownContent , setMarkdownContent ] = useState('预览内容') //html内容\n    const [ introducemd , setIntroducemd ] = useState()         //简介的markdown内容\n    const [ introducehtml , setIntroducehtml ] = useState('等待编辑') //简介的html内容\n    const [ showData , setShowData ] = useState()   //发布日期\n    const [ updateDate , setUpdateDate] = useState() //修改日期\n    const [ typeInfo , setTypeInfo ] = useState([])   //文章类别信息\n    const [ selectedType , setSelectedType] = useState('请选择类型') //选择文章类型    \n\n    //[] 就是只执行一次\n    useEffect(()=>{\n        getTypeInfo()\n    },[])\n\n    const renderer = new marked.Renderer();\n\n    //markdown设置\n    marked.setOptions({\n        renderer:renderer,\n        gfm:true,\n        pedantic:false,\n        sanitize:false,\n        tables:true,\n        breaks:false,\n        smartLists:true,\n        smartypants:false\n    })\n\n    const changeContext = (e)=>{\n        setArticleContent(e.target.value)\n        let html = marked(e.target.value)\n        setMarkdownContent(html)\n    }\n\n    const changeIntroduce = (e)=>{\n        setIntroducemd(e.target.value)\n        let html = marked(e.target.value)\n        setIntroducehtml(html)\n    }\n\n    const getTypeInfo = ()=>{\n        axios({\n            method:'get',\n            url:servicePath.type,\n        }).then(\n            res=>{\n                setTypeInfo(res.data['date'])\n            }\n        )\n    }\n\n    const selectTypeHandler = (value)=>{\n        setSelectedType(value)\n    }\n\n    const saveArticle = ()=>{\n        if(selectedType==='请选择类型'){\n            message.error(\"必须选择文章类型\")\n            return false\n        }else if(!articleTitle){\n            message.error(\"必须填写文章标题\")\n            return false\n        }else if(!articleContent){\n            message.error(\"必须填写文章内容\")\n            return false\n        }else if(!introducemd){\n            message.error(\"必须填写文章简介\")\n            return false\n        }else if(!showData){\n            message.error(\"必须填写发布时间\")\n            return false\n        }\n        \n        axios({\n            method:'POST',\n            url:servicePath.addArticle+'?type_id='+selectedType+'&title='+articleTitle+'&article_content='+articleContent+'&introduce='+introducemd+'&addTime='+showData\n        }).then(\n            res=>{\n                if(res.data['status']==200){\n                    message.success(res.data['msg'])\n                    setSelectedType('请选择类型')\n                    setArticleTitle('')\n                    setArticleContent('')\n                    setIntroducemd('')\n                    setShowData('')\n                }else{\n                    message.error(res.data['msg'])\n                }\n            }\n        )\n    }\n\n\n\n    return(\n        <div>\n            <Row gutter={5}>\n                <Col xs={24} sm={24} md={24} lg={24} xl={18}>\n                    <Row gutter={10}>\n                        <Col xs={24} sm={24} md={24} lg={18} xl={19}>\n                            <Input\n                                value={articleTitle}\n                                placeholder=\"博客标题\"\n                                size=\"large\"\n                                onChange={e=>{setArticleTitle(e.target.value)}}\n                            />\n                        </Col>\n                        <Col xs={0} sm={0} md={0} lg={6} xl={5}> \n                            &nbsp;\n                            <Select defaultValue={selectedType} size=\"large\" onChange = {selectTypeHandler}>\n                                {\n                                    // console.log(typeInfo)\n                                    typeInfo.map((item,index)=>{\n                                        return (\n                                            <Option key={index} value={item.id}>{item.typeName}</Option>\n                                        )\n                                    })\n                                }\n                            </Select>\n                        </Col>\n                    </Row>\n                    <br />\n                    <Row gutter={10}>\n                        <Col xs={12} sm={12} md={12} lg={12} xl={12}>\n                            <TextArea \n                                className=\"markdown-content\"\n                                rows={35}\n                                placeholder=\"文章内容\"\n                                value={articleContent}\n                                onChange={changeContext}\n                                />\n                        </Col>\n                        <Col xs={12} sm={12} md={12} lg={12} xl={12}>\n                            <div className=\"show-html\"\n                                dangerouslySetInnerHTML={{__html:markdownContent}}\n                            >\n                                \n                            </div>\n                        </Col>\n                    </Row>\n                </Col>\n                <Col xs={0} sm={0} md={0} lg={0} xl={6}>\n                    <Row>\n                        <Col xs={0} sm={0} md={0} lg={0} xl={24}>\n                                <Button  size=\"large\">暂存文章</Button>&nbsp;\n                                <Button type=\"primary\" size=\"large\" onClick={saveArticle}>发布文章</Button>\n                                <br/>\n                        </Col>\n                        <Col xs={0} sm={0} md={0} lg={0} xl={24}>\n                            <br/>\n                            <TextArea\n                                rows={4}\n                                placeholder=\"文章简介\"\n                                onChange={changeIntroduce}\n                                value={introducemd}\n                            >\n                            </TextArea>\n                            <br/><br/>\n                            <div className=\"introduce-html\"\n                                dangerouslySetInnerHTML={{__html:introducehtml}}\n                            ></div>\n                        </Col>\n                        \n                        <Col xs={0} sm={0} md={0} lg={0} xl={12}>\n                            <br/>\n                            <div className=\"data-select\">\n                                <DatePicker \n                                    onChange={(date,dateString)=>{setShowData(dateString)}}\n                                    placeholder=\"发布日期\"\n                                    size=\"large\"\n                                />\n                            </div>\n                        </Col>\n                    </Row>\n                </Col>\n            </Row>\n        </div>\n    )\n}\n\nexport default AddArticle"]},"metadata":{},"sourceType":"module"}